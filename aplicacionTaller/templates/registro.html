{% load static %}
<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Registro</title>
    <link rel="stylesheet" href="{% static 'css/registro.css' %}">
</head>
<body>
    <div class="register-container">
        <h1>Registro</h1>

        {% if messages %}
            <div class="messages">
                {% for message in messages %}
                    <p class="message {{ message.tags }}">{{ message }}</p>
                {% endfor %}
            </div>
        {% endif %}

        <form method="POST" novalidate>
            {% csrf_token %}

            <label for="tipo_usuario">Tipo de usuario:</label>
            <select name="tipo_usuario" id="tipo_usuario">
                <option value="Cliente" {% if tipo_usuario_seleccionado == 'Cliente' %}selected{% endif %}>
                    Cliente
                </option>
                <option value="Mecanico" {% if tipo_usuario_seleccionado == 'Mecanico' %}selected{% endif %}>
                    Mecánico
                </option>
            </select>

            <div id="datos_cuenta">
                <h3>Datos de la Cuenta</h3>
                {{ user_form.as_p }}
            </div>

            <div id="datos_cliente" style="{% if tipo_usuario_seleccionado != 'Cliente' %}display:none;{% endif %}">
                <h3>Datos del Cliente</h3>
                {{ cliente_form.as_p }}
            </div>

            <div id="datos_mecanico" style="{% if tipo_usuario_seleccionado != 'Mecanico' %}display:none;{% endif %}">
                <h3>Datos del Mecánico</h3>
                {{ mecanico_form.as_p }}
            </div>

            <button type="submit">Registrar</button>
        </form>

        <p><a href="{% url 'login' %}">Volver al inicio de sesión</a></p>
    </div>

<script src="{% static 'js/registro.js' %}"></script>
</body>
</html>