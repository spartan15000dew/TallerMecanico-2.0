<!DOCTYPE html>
{% load static %}
<html lang="es">

<head>

    <meta charset="UTF-R">

    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <link rel="stylesheet" href="{% static 'css/stylem.css' %}">

    <title>Menú Principal - Taller Mecánico</title>

</head>
    
    <!-- Cargar CSS -->
    <link rel="stylesheet" href="{% static 'css/servicios.css' %}">
</head>
<body>

    <!-- Esta es la barra de navegación superior que verán todas las páginas -->
    <header class="top-bar">
        <a href="{% url 'menu' %}" class="logo">Taller Mecanico</a>
        <nav class="navigation">
            
            {% if user.is_authenticated %}
                <!-- Enlaces para usuarios logueados -->
                <a href="{% url 'menu' %}">Inicio</a>
                <a href="{% url 'mis_citas' %}">Mis Citas</a>
                
                {% if rol == 'cliente' %}
                    <a href="{% url 'gestionar_vehiculos' %}">Mis Vehículos</a>
                {% endif %}

                <span class="user-info">
                    {{ user.first_name|default:user.username }} ({{ rol|title }})
                </span>
                <a href="{% url 'logout' %}" class="button button-logout">Cerrar Sesión</a>
            
            {% else %}
                <!-- Enlaces para invitados (no logueados) -->
                <a href="{% url 'login' %}" class="button">Iniciar Sesión</a>
                <a href="{% url 'registro' %}" class="button button-secondary">Registrarse</a>
            {% endif %}
        </nav>
    </header>

    <!-- Contenedor principal donde se cargará el contenido de las otras plantillas -->
    <main class="container">
        
        <!-- Bloque para mostrar mensajes de error o éxito -->
        {% if messages %}
            <div class="messages-container">
                {% for message in messages %}
                    <div class="message {{ message.tags }}">{{ message }}</div>
                {% endfor %}
            </div>
        {% endif %}

        <!-- Aquí se inserta el contenido de 'menu.html', 'panel_cliente.html', etc. -->
        {% block content %}
        
        {% endblock %}
    </main>

</body>
</html>